/* alertify - v0.3.9 - 2013-04-20 */
(function(d,a){var c,b=d.document;c=function(){var A,E,D,B,e,x,j,F,q,k,w,C,H={},i={},z=!1,G={ENTER:13,ESC:27,SPACE:32},t=[];return i={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<a href="#" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</a>',cancel:'<a href="#" class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</a>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},C=function(){var m,f,l=!1,h=b.createElement("fakeelement"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(m in g){if(h.style[m]!==a){f=g[m],l=!0;break}}return{type:f,supported:l}},A=function(f){return b.getElementById(f)},H={labels:{ok:"OK",cancel:"Cancel"},delay:5000,buttonReverse:!1,buttonFocus:"ok",transition:a,addListeners:function(K){var I,g,s,o,L,r=D!==a,J=E!==a,M=w!==a,h="",v=this;I=function(f){return f.preventDefault!==a&&f.preventDefault(),s(f),w!==a&&(h=w.value),"function"==typeof K&&(w!==a?K(!0,h):K(!0)),!1},g=function(f){return f.preventDefault!==a&&f.preventDefault(),s(f),"function"==typeof K&&K(!1),!1},s=function(){v.hide(),v.unbind(b.body,"keyup",o),v.unbind(B,"focus",L),M&&v.unbind(k,"submit",I),r&&v.unbind(D,"click",I),J&&v.unbind(E,"click",g)},o=function(l){var f=l.keyCode;f!==G.SPACE||M||I(l),f===G.ESC&&J&&g(l)},L=function(){M?w.focus():!J||v.buttonReverse?D.focus():E.focus()},this.bind(B,"focus",L),r&&this.bind(D,"click",I),J&&this.bind(E,"click",g),this.bind(b.body,"keyup",o),M&&this.bind(k,"submit",I),this.transition.supported||this.setFocus()},bind:function(h,f,g){"function"==typeof h.addEventListener?h.addEventListener(f,g,!1):h.attachEvent&&h.attachEvent("on"+f,g)},handleErrors:function(){if(d.onerror!==a){var f=this;return d.onerror=function(l,g,h){f.error("["+l+" on line "+h+" of "+g+"]",0)},!0}return !1},appendButtons:function(g,f){return this.buttonReverse?f+g:g+f},build:function(m){var f="",h=m.type,g=m.message,l=m.cssClass||"";switch(f+='<div class="alertify-dialog">',"none"===H.buttonFocus&&(f+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===h&&(f+='<form id="alertify-form">'),f+='<article class="alertify-inner">',f+=i.message.replace("{{message}}",g),"prompt"===h&&(f+=i.input),f+=i.buttons.holder,f+="</article>","prompt"===h&&(f+="</form>"),f+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',f+="</div>",h){case"confirm":f=f.replace("{{buttons}}",this.appendButtons(i.buttons.cancel,i.buttons.ok)),f=f.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":f=f.replace("{{buttons}}",this.appendButtons(i.buttons.cancel,i.buttons.submit)),f=f.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":f=f.replace("{{buttons}}",i.buttons.ok),f=f.replace("{{ok}}",this.labels.ok);break;default:}return F.className="alertify alertify-"+h+" "+l,j.className="alertify-cover",f},close:function(p,g){var f,m,l=g&&!isNaN(g)?+g:this.delay,h=this;this.bind(p,"click",function(){f(p)}),m=function(n){n.stopPropagation(),h.unbind(this,h.transition.type,m),q.removeChild(this),q.hasChildNodes()||(q.className+=" alertify-logs-hidden")},f=function(n){n!==a&&n.parentNode===q&&(h.transition.supported?(h.bind(n,h.transition.type,m),n.className+=" alertify-log-hide"):(q.removeChild(n),q.hasChildNodes()||(q.className+=" alertify-logs-hidden")))},0!==g&&setTimeout(function(){f(p)},l)},dialog:function(p,g,m,l,h){x=b.activeElement;var f=function(){q&&null!==q.scrollTop&&j&&null!==j.scrollTop||f()};if("string"!=typeof p){throw Error("message must be a string")}if("string"!=typeof g){throw Error("type must be a string")}if(m!==a&&"function"!=typeof m){throw Error("fn must be a function")}return"function"==typeof this.init&&(this.init(),f()),t.push({type:g,message:p,callback:m,placeholder:l,cssClass:h}),z||this.setup(),this},extend:function(f){if("string"!=typeof f){throw Error("extend method must have exactly one paramter")}return function(g,h){return this.log(g,f,h),this}},hide:function(){var g,f=this;t.splice(0,1),t.length>0?this.setup(!0):(z=!1,g=function(h){h.stopPropagation(),F.className+=" alertify-isHidden",f.unbind(F,f.transition.type,g)},this.transition.supported?(this.bind(F,this.transition.type,g),F.className="alertify alertify-hide alertify-hidden"):F.className="alertify alertify-hide alertify-hidden alertify-isHidden",j.className="alertify-cover alertify-cover-hidden",x.focus())},init:function(){b.createElement("nav"),b.createElement("article"),b.createElement("section"),j=b.createElement("div"),j.setAttribute("id","alertify-cover"),j.className="alertify-cover alertify-cover-hidden",b.body.appendChild(j),F=b.createElement("section"),F.setAttribute("id","alertify"),F.className="alertify alertify-hidden",b.body.appendChild(F),q=b.createElement("section"),q.setAttribute("id","alertify-logs"),q.className="alertify-logs alertify-logs-hidden",b.body.appendChild(q),b.body.setAttribute("tabindex","0"),this.transition=C(),delete this.init},log:function(l,f,h){var g=function(){q&&null!==q.scrollTop||g()};return"function"==typeof this.init&&(this.init(),g()),q.className="alertify-logs",this.notify(l,f,h),this},notify:function(l,f,g){var h=b.createElement("article");h.className="alertify-log"+("string"==typeof f&&""!==f?" alertify-log-"+f:""),h.innerHTML=l,q.appendChild(h),setTimeout(function(){h.className=h.className+" alertify-log-show"},50),this.close(h,g)},set:function(g){var f;if("object"!=typeof g&&g instanceof Array){throw Error("args must be an object")}for(f in g){g.hasOwnProperty(f)&&(this[f]=g[f])}},setFocus:function(){w?(w.focus(),w.select()):e.focus()},setup:function(m){var g,h=t[0],f=this;z=!0,g=function(l){l.stopPropagation(),f.setFocus(),f.unbind(F,f.transition.type,g)},this.transition.supported&&!m&&this.bind(F,this.transition.type,g),F.innerHTML=this.build(h),B=A("alertify-resetFocus"),D=A("alertify-ok")||a,E=A("alertify-cancel")||a,e="cancel"===H.buttonFocus?E:"none"===H.buttonFocus?A("alertify-noneFocus"):D,w=A("alertify-text")||a,k=A("alertify-form")||a,"string"==typeof h.placeholder&&""!==h.placeholder&&(w.value=h.placeholder),m&&this.setFocus(),this.addListeners(h.callback)},unbind:function(h,f,g){"function"==typeof h.removeEventListener?h.removeEventListener(f,g,!1):h.detachEvent&&h.detachEvent("on"+f,g)}},{alert:function(h,f,g){return H.dialog(h,"alert",f,"",g),this},confirm:function(h,f,g){return H.dialog(h,"confirm",f,"",g),this},extend:H.extend,init:H.init,log:function(h,f,g){return H.log(h,f,g),this},prompt:function(l,f,h,g){return H.dialog(l,"prompt",f,h,g),this},success:function(g,f){return H.log(g,"success",f),this},error:function(g,f){return H.log(g,"error",f),this},set:function(f){H.set(f)},labels:H.labels,debug:H.handleErrors}},"function"==typeof define?define([],function(){return new c}):d.alertify===a&&(d.alertify=new c)})(this);